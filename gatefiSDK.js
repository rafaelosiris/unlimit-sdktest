/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/@gatefi/js-sdk@0.15.0/dist/gateFiSDK.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
export const GateFiDisplayModeEnum = {
    Embedded: 'Embedded',
    // other display modes...
  };
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("gateFiSDK",[],t):"object"==typeof exports?exports.gateFiSDK=t():e.gateFiSDK=t()}(window,(()=>(()=>{"use strict";var e,t,n,i={d:(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};i.r(o),i.d(o,{GateFiDisplayModeEnum:()=>t,GateFiEventTypes:()=>n,GateFiLangEnum:()=>e,GateFiSDK:()=>L}),function(e){e.en_US="en_US",e.es_PE="es_PE"}(e||(e={})),function(e){e.Overlay="overlay",e.Embedded="embedded"}(t||(t={})),function(e){e.onLoad="onLoad",e.onInit="onInit",e.onClose="onClose",e.onSetThemeType="onSetThemeType",e._onRedirect="onRedirect"}(n||(n={}));var r,s="gatefi:",a=function(){function e(e){void 0===e&&(e=window),this.debug=!1,this.subscribes={},this.target=e}return e.prototype.send=function(e,t){this.debug&&console.log("[GateFiSDK] send",e),this.target.postMessage({type:this.getTypeWithPrefix(e),payload:t},"*")},e.prototype.start=function(){window.addEventListener("message",this.listenerMessage.bind(this))},e.prototype.stop=function(){window.removeEventListener("message",this.listenerMessage.bind(this))},e.prototype.subscribe=function(e,t){e&&t&&(this.subscribes[e]||(this.subscribes[e]=[]),this.subscribes[e].find((function(e){return e===t}))||this.subscribes[e].push(t))},e.prototype.unsubscribe=function(e,t){this.subscribes[e]&&(this.subscribes[e]=this.subscribes[e].filter((function(e){return e!==t})))},e.prototype.clear=function(){this.subscribes={}},e.prototype.run=function(e,t){this.subscribes[e]&&this.subscribes[e].forEach((function(n){return n(e,t)}))},e.prototype.listenerMessage=function(e){var t=e.data;if(e.isTrusted){var n=t;if(n&&"object"==typeof n&&"string"==typeof n.type&&n.type.startsWith(s)){this.debug&&console.log("[GateFiSDK] receive",e.data);var i=this.getType(n.type);this.run(i,n.payload)}}},e.prototype.getTypeWithPrefix=function(e){return"".concat(s).concat(e)},e.prototype.getType=function(e){return e.replace(s,"")},e}(),l=function(){return l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},c=new(function(){function e(){this.mediaQuery="(max-width: 540px)"}return e.prototype.createWidget=function(e,t){void 0===t&&(t={});var n=document.createElement("iframe");return n.setAttribute("src",e),Object.assign(n.style,l({width:"420px",height:"680px",border:"none"},t)),n},e.prototype.isNodeExist=function(e){return!!document.querySelector(e)},e.prototype.addListenerOnClick=function(e,t){var n=document.querySelector(e);return n.addEventListener("click",t),function(){n.removeEventListener("click",t)}},e.prototype.addListenerOnScreenSizeChangedToMobile=function(e){var t=window.matchMedia(this.mediaQuery),n=function(t){return e(t.matches)};return t.addEventListener("change",n),function(){t.removeEventListener("change",n)}},e.prototype.isMobileScreen=function(){return window.matchMedia(this.mediaQuery).matches},e}()),d="gatefi-sdk-overlay",u={width:"420px",height:"680px","border-radius":"24px","box-shadow":"0px 12px 24px rgba(6, 13, 51, 0.07)"},f={width:"100%",height:"100%","border-radius":"0px","box-shadow":"none"},p={height:"auto"},h={height:"100%"},y=function(){function e(){this.widget=null,this.overlay=null,this.contentWrapp=null,this.eventListeners=[]}return e.prototype.create=function(e,t){this.overlay=this.createOverlay(),this.contentWrapp=this.createWrapp(),this.widget=c.createWidget(e,c.isMobileScreen()?f:u),this.overlay.appendChild(this.contentWrapp),this.contentWrapp.appendChild(this.widget),document.body.appendChild(this.overlay),t&&this.eventListeners.push(c.addListenerOnClick(t,this.show.bind(this))),this.eventListeners.push(c.addListenerOnScreenSizeChangedToMobile(this.onMobileView.bind(this))),this.eventListeners.push(c.addListenerOnClick("#".concat(d),this.hide.bind(this)))},e.prototype.createOverlay=function(){var e=document.createElement("div");return Object.assign(e.style,{position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0,0,0,0.5)","backdrop-filter":"blur(12px)","z-index":"2",filter:"blur(0)",overflowY:"auto",zIndex:1e3}),e.setAttribute("id",d),e},e.prototype.createWrapp=function(){var e=document.createElement("div");return Object.assign(e.style,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100%"}),e},e.prototype.onMobileView=function(e){Object.assign(this.widget.style,e?f:u),Object.assign(this.contentWrapp.style,e?h:p)},e.prototype.getContentWindow=function(){var e;return(null===(e=this.widget)||void 0===e?void 0:e.contentWindow)||null},e.prototype.destroy=function(){this.widget&&this.overlay&&(this.eventListeners.forEach((function(e){return e()})),this.overlay.remove(),this.overlay=null,this.widget=null)},e.prototype.show=function(){this.overlay&&(this.overlay.style.display="block")},e.prototype.hide=function(){this.overlay&&(this.overlay.style.display="none")},e}(),b=function(){function e(){this.widget=null}return e.prototype.create=function(e,t){this.widget=c.createWidget(e),document.querySelector(t).appendChild(this.widget)},e.prototype.getContentWindow=function(){var e;return(null===(e=this.widget)||void 0===e?void 0:e.contentWindow)||null},e.prototype.destroy=function(){var e;null===(e=this.widget)||void 0===e||e.remove()},e}(),g=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},m=function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},v=function(){function e(){}return e.prototype.validate=function(e){var n;if(!e.merchantId&&"string"!=typeof e.merchantId)return"merchantId should be a string";if((null==e?void 0:e.isSandbox)&&"boolean"!=typeof e.isSandbox)return"isSandbox should be a boolean";if(!Object.values(t).includes(e.displayMode))return"displayMode: ".concat(e.displayMode," is not exist");if(e.displayMode===t.Embedded&&!e.nodeSelector)return"nodeSelector is a required field for embedded mode";if(e.displayMode===t.Overlay&&c.isNodeExist("#".concat(d)))return"GateFiSDK with 'overlay' display mode already exist";if(e.nodeSelector&&!c.isNodeExist(e.nodeSelector))return"node with id ".concat(e.nodeSelector," does not exist");if(e.successUrl&&!m(e.successUrl))return"successUrl should be a valid URL";if(e.cancelUrl&&!m(e.cancelUrl))return"cancelUrl should be a valid URL";if(e.declineUrl&&!m(e.declineUrl))return"declineUrl should be a valid URL";if((null==e?void 0:e.externalId)&&"string"!=typeof e.externalId)return"externalId should be a string";if((null==e?void 0:e.externalId)&&e.externalId.length>64)return"externalId length should not be more 64 chars";if((null==e?void 0:e.hideAsset)&&"boolean"!=typeof e.hideAsset)return"hideAsset should be a boolean";if(e.assetConfirmation){if("string"!=typeof e.assetConfirmation)return"assetConfirmation should be a string";if(e.assetConfirmation.length>8)return"assetConfirmation should be less 8 chars"}if(e.networkConfirmation&&"string"!=typeof e.networkConfirmation)return"networkConfirmation should be a string";if(e.walletConfirmation&&"string"!=typeof e.walletConfirmation)return"walletConfirmation should be a string";if((null==e?void 0:e.availablePayments)&&!Array.isArray(null==e?void 0:e.availablePayments))return"availablePayments should be an array of strings";if((null==e?void 0:e.payment)&&"string"!=typeof(null==e?void 0:e.payment))return"payment should be a string";if((null==e?void 0:e.region)&&"string"!=typeof(null==e?void 0:e.region))return"region should be a string";if((null==e?void 0:e.lang)&&"string"!=typeof(null==e?void 0:e.lang))return"lang should be a string";if((null==e?void 0:e.hideBrand)&&"boolean"!=typeof e.hideBrand)return"hideBrand should be a boolean";if((null==e?void 0:e.redirectUrl)&&"string"!=typeof(null==e?void 0:e.redirectUrl))return"redirectUrl should be a string";if((null==e?void 0:e.customTexts)&&(null===(n=e.customTexts)||void 0===n?void 0:n.backToButtonLabel)){if("string"!=typeof e.customTexts.backToButtonLabel)return"backToButtonLabel should be a string";if(e.customTexts.backToButtonLabel.length>30)return"backToButtonLabel length should not be more 30 chars"}return null},e}(),w=new v,x=new(function(){function e(){}return e.prototype.send=function(e){console.error("GateFiSDK:",e)},e}()),S=((r={})[t.Overlay]=y,r[t.Embedded]=b,r),L=function(){function e(e){var t,i,o,r,s=this,l=w.validate(e);if(l)x.send(l);else{this.config=e;var c=(t=(null==e?void 0:e.isSandbox)?"https://onramp-sandbox.gatefi.com/":"https://onramp.gatefi.com/",i=new URL(window.location.href),o=new URLSearchParams(i.search),r={},o.forEach((function(e,t){(t.startsWith("gtf")||"merchantId"===t)&&(r[t]=e,o.delete(t))})),i.search=o.toString(),window.history.pushState({},"",i.toString()),function(e,t){if("string"!=typeof e)throw Error("Invalid url type, must be a string. Receive type ".concat(typeof e));if("object"!=typeof t)throw Error("Invalid params type, must be a string. Receive type ".concat(typeof t));var n=new URL(e);return n.search=new URLSearchParams(g(g([],Array.from(new URLSearchParams(n.search).entries()),!0),Object.entries(t),!0)).toString(),n.toString()}(t,r));this.layout=new S[this.config.displayMode],this.layout.create(c,this.config.nodeSelector);var d=this.layout.getContentWindow();d&&(this.pmIframe=new a(d),this.pmIframe.start(),this.pmIframe.subscribe(n.onLoad,(function(){s.pmIframe.send(n.onInit,{merchantId:s.config.merchantId,isSandbox:s.config.isSandbox,walletLock:s.config.walletLock,fiatAmountLock:s.config.fiatAmountLock,cryptoAmountLock:s.config.cryptoAmountLock,fiatCurrencyLock:s.config.fiatCurrencyLock,cryptoCurrencyLock:s.config.cryptoCurrencyLock,availablePayments:s.config.availablePayments,payment:s.config.payment,region:s.config.region,displayMode:s.config.displayMode,lang:s.config.lang,walletAddress:s.config.walletAddress,email:s.config.email,defaultFiat:s.config.defaultFiat,defaultCrypto:s.config.defaultCrypto,availableCrypto:s.config.availableCrypto,availableFiat:s.config.availableFiat,styles:s.config.styles,isPlaidMode:s.config.isPlaidMode,hideThemeSwitcher:s.config.hideThemeSwitcher,successUrl:s.config.successUrl,cancelUrl:s.config.cancelUrl,declineUrl:s.config.declineUrl,externalId:s.config.externalId,hideAsset:s.config.hideAsset,hideBrand:s.config.hideBrand,redirectUrl:s.config.redirectUrl,assetConfirmation:s.config.assetConfirmation,networkConfirmation:s.config.networkConfirmation,walletConfirmation:s.config.walletConfirmation,customTexts:s.config.customTexts}),s.pmIframe.subscribe(n.onClose,s.hide.bind(s)),s.pmIframe.subscribe(n._onRedirect,s.redirect.bind(s))})))}}return e.prototype.subscribe=function(e,t){var n;null===(n=this.pmIframe)||void 0===n||n.subscribe(e,t)},e.prototype.unsubscribe=function(e,t){var n;null===(n=this.pmIframe)||void 0===n||n.unsubscribe(e,t)},e.prototype.hide=function(){this.layout instanceof y&&this.layout.hide()},e.prototype.setThemeType=function(e){var t;null===(t=this.pmIframe)||void 0===t||t.send(n.onSetThemeType,{type:e})},e.prototype.show=function(){this.layout instanceof y&&this.layout.show()},e.prototype.destroy=function(){var e,t;null===(e=this.pmIframe)||void 0===e||e.stop(),null===(t=this.layout)||void 0===t||t.destroy()},e.prototype.redirect=function(e,t){window.open(t.redirectUrl,"_self")},e}();return o})()));
//# sourceMappingURL=gateFiSDK.js.map